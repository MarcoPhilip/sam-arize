{% extends "base.html" %}
{% block content %}
<style>
  .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem; }
  .card { padding: 1rem; border: 1px solid #e5e7eb; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,.05);}
  .kpi { font-size: 1.8rem; font-weight: 700; margin-top: .3rem; }
  .muted { color: #6b7280; font-size: .9rem; }
  table { width:100%; border-collapse: collapse; margin-top: 1rem;}
  th, td { padding: .6rem; border-bottom: 1px solid #e5e7eb; text-align:left;}
  th { background:#f9fafb; font-weight:600;}
  .pill { padding:.2rem .5rem; border-radius:999px; background:#eef2ff; color:#3730a3; font-size:.8rem;}
</style>

<h2>Admin Dashboard</h2>
<p class="muted">Range: {{ week_ago }} â†’ {{ today }}</p>

<div class="grid">
  {% for c in cards %}
    <div class="card">
      <div class="muted">{{ c.label }}</div>
      <div class="kpi">{{ c.value }}</div>
    </div>
  {% endfor %}
</div>

<div class="grid" style="margin-top:1rem;">
  <div class="card">
    <div class="muted">POs in last 7 days</div>
    <div class="kpi">{{ pos_last_7 }}</div>
  </div>
  <div class="card">
    <div class="muted">Value in last 7 days</div>
    <div class="kpi">${{ value_last_7 }}</div>
  </div>
</div>

<h3 style="margin-top:1.5rem;">Recent Purchase Orders</h3>
<table>
  <thead>
    <tr>
      <th>#</th>
      <th>Supplier</th>
      <th>Item</th>
      <th>Qty</th>
      <th>Price</th>
      <th>Created</th>
    </tr>
  </thead>
  <tbody>
    {% for po in recent_pos %}
    <tr>
      <td><span class="pill">#{{ po.id }}</span></td>
      <td>{{ po.supplier }}</td>
      <td>{{ po.item }}</td>
      <td>{{ po.quantity }}</td>
      <td>${{ po.price }}</td>
      <td>{{ po.created_at|date:"Y-m-d H:i" }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="6">No recent purchase orders.</td></tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}